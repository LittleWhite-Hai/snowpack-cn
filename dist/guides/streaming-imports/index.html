<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"><link rel="manifest" href="/favicon/site.webmanifest"><title>流式导入</title><meta name="title" content="流式导入"><meta name="description"><meta property="og:type" content="website"><meta property="og:url" content="TODO"><meta property="og:title" content="流式导入"><meta property="og:description"><meta property="og:image" content="https://www.snowpack.dev/img/social-2.jpg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="TODO"><meta property="twitter:title" content="流式导入"><meta property="twitter:description"><meta property="twitter:image" content="https://www.snowpack.dev/img/social-2.jpg"><link rel="stylesheet" href="/_astro/common-ZjJAJL.css" type="text/css"><link href="https://fonts.googleapis.com/css2?family=Overpass:wght@400;700;900&amp;display=swap" rel="stylesheet"><style type="text/css">
.layout.astro-Ju9h9Rf8 {
  display: grid;
  grid-template-areas: "contents" "main";
  grid-gap: 2rem;
}
@media (min-width: 800px) {
  .layout.astro-Ju9h9Rf8 {
    grid-template-areas: "nav contents" "nav main";
  }
}
@media (min-width: 1240px) {
  .layout.astro-Ju9h9Rf8 {
    grid-template-areas: "nav main contents";
    grid-template-columns: 16rem auto 20rem;
  }
}
.layout-nav.astro-Ju9h9Rf8 {
  grid-area: nav;
}
@media (min-width: 800px) {
  .layout-nav.astro-Ju9h9Rf8 {
    position: -webkit-sticky;
    position: sticky;
    min-height: calc(100vh - 3.5rem);
    height: calc(100vh - 3.5rem);
    top: 3.5rem;
  }
}
.layout-main.astro-Ju9h9Rf8 {
  grid-area: main;
  min-width: 0;
  padding: 24px 0 24px 0;
}
@media (min-width: 1240px) {
  .layout-contents.astro-Ju9h9Rf8 {
    position: -webkit-sticky;
    position: sticky;
    min-height: calc(100vh - 3.5rem);
    height: calc(100vh - 3.5rem);
    top: 3.5rem;
  }
}

h3 {
  position: relative;
}

.header-link {
  position: absolute;
  top: 0;
  right: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  font-weight: 400;
  font-size: 0.75em;
  padding-left: 0.5rem;
  padding-right: 0.5rem;
  color: #c1c1c1;
  opacity: 0;
  transition: opacity 100ms linear, color 100ms linear;
}

.header-link:hover {
  color: #267dd6;
}

h3:hover .header-link {
  opacity: 1;
}</style></head><body><nav class="nav astro-ahFEmudE"><button id="toc-drawer-button" class="mobile-open astro-ahFEmudE" type="button" aria-expanded="false" aria-controls="nav-primary"><svg focusable="false" class="hamburger astro-ahFEmudE" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><title>Toggle mobile menu</title><path d="M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z" class="astro-ahFEmudE"></path></svg></button><a class="logo astro-ahFEmudE" href="/"><svg class="logo-icon astro-ahFEmudE" viewBox="0 0 640 512" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g transform="translate(-1.000000, 0.000000)" fill-rule="nonzero" class="astro-ahFEmudE"><path d="M635.92,462.7 L347.92,14.7 C342.03,5.54 331.89,0 321,0 C310.11,0 299.97,5.54 294.08,14.7 L6.08,462.7 C-0.250773249,472.547007 -0.699487627,485.064987 4.91,495.34 C10.522069,505.612419 21.2945349,512 33,512 L609,512 C620.71,512 631.48,505.61 637.09,495.33 C642.699457,485.058495 642.250708,472.543372 635.92,462.7 Z M321,91.18 L406.39,224 L321,224 L257,288 L218.94,249.94 L321,91.18 Z" id="Shape" class="astro-ahFEmudE"></path></g></svg><span class="logo-type astro-ahFEmudE">Snowpack</span></a><div class="search astro-ahFEmudE"><input type="text" name="search" placeholder="在文档中搜索..." class="search-input astro-ahFEmudE" id="search-form-input"><span class="search-hint astro-ahFEmudE"><span class="sr-only astro-ahFEmudE">Press </span><kbd class="font-sans astro-ahFEmudE"><abbr title="Command" style="text-decoration: none;" class="astro-ahFEmudE">⌘</abbr></kbd><span class="sr-only astro-ahFEmudE"> and </span><kbd class="font-sans astro-ahFEmudE">K</kbd><span class="sr-only astro-ahFEmudE"> to search</span></span></div><a href="https://github.com/snowpackjs/snowpack/releases" target="_blank" class="link version astro-ahFEmudE">
    v3.8.8
  </a><a href="https://github.com/withastro/snowpack" target="_blank" class="link link__desktop astro-ahFEmudE"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="social astro-ahFEmudE" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" class="astro-ahFEmudE"></path></svg></a><a href="https://twitter.com/snowpackjs" target="_blank" class="link link__desktop astro-ahFEmudE"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="social astro-ahFEmudE" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z" class="astro-ahFEmudE"></path></svg></a><a href="https://discord.gg/snowpack" target="_blank" class="link link__desktop astro-ahFEmudE"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="discord" class="social astro-ahFEmudE" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 210 240"><path d="M84.79 90.45c-6.45 0-11.55 5.66-11.55 12.57s5.21 12.57 11.55 12.57c6.45 0 11.55-5.66 11.55-12.57.11-6.91-5.09-12.57-11.55-12.57zm41.32 0c-6.45 0-11.55 5.66-11.55 12.57s5.21 12.57 11.55 12.57c6.45 0 11.55-5.66 11.55-12.57s-5.09-12.57-11.55-12.57z" class="astro-ahFEmudE"></path><path fill="currentColor" d="M185.4 0H24.6C11.04 0 0 11.04 0 24.72v162.24c0 13.68 11.04 24.72 24.6 24.72h136.08l-6.36-22.2 15.36 14.28 14.52 13.44L210 240V24.72C210 11.04 198.96 0 185.4 0zm-46.32 156.72s-4.32-5.16-7.92-9.72c15.72-4.44 21.72-14.28 21.72-14.28-4.92 3.24-9.6 5.52-13.8 7.08-6 2.52-11.76 4.2-17.4 5.16-11.52 2.16-22.08 1.56-31.08-.12-6.84-1.32-12.72-3.24-17.64-5.16-2.76-1.08-5.76-2.4-8.76-4.08-.36-.24-.72-.36-1.08-.6-.24-.12-.36-.24-.48-.36-2.16-1.2-3.36-2.04-3.36-2.04s5.76 9.6 21 14.16c-3.6 4.56-8.04 9.96-8.04 9.96-26.52-.84-36.6-18.24-36.6-18.24 0-38.64 17.28-69.96 17.28-69.96 17.28-12.96 33.72-12.6 33.72-12.6l1.2 1.44c-21.6 6.24-31.56 15.72-31.56 15.72s2.64-1.44 7.08-3.48c12.84-5.64 23.04-7.2 27.24-7.56.72-.12 1.32-.24 2.04-.24 7.32-.96 15.6-1.2 24.24-.24 11.4 1.32 23.64 4.68 36.12 11.52 0 0-9.48-9-29.88-15.24l1.68-1.92s16.44-.36 33.72 12.6c0 0 17.28 31.32 17.28 69.96 0 0-10.2 17.4-36.72 18.24z" class="astro-ahFEmudE"></path></svg></a></nav><script>
  function handleMobileNav(evt) {
    evt.preventDefault();
    /*If hidden-mobile class is enabled that means we are on desktop do overflow normal but we
      if we are at mobile fixed body position, so that its not scrollable(which currently causing bug) and navbar  handling its
      owns scroll. Case to consider there are chance use can open navbar using toggle button and user when click on any link
      body postion should be unset
      */
    document.body.classList.toggle('is-nav-open');
    const isOpen = document.body.classList.contains('is-nav-open');
    if (isOpen) {
      evt.target.setAttribute('aria-expanded', 'true');
    } else {
      evt.target.setAttribute('aria-expanded', 'false');
    }
  }

  const mobileNavBtn = document.getElementById('toc-drawer-button');
  mobileNavBtn.addEventListener('click', handleMobileNav);
  mobileNavBtn.addEventListener('touchend', handleMobileNav);
  if (window.location.pathname.startsWith('/posts')) {
    mobileNavBtn.style.display = 'none';
  }

  const searchFormInputEl = document.getElementById('search-form-input');
  searchFormInputEl.addEventListener('keyup', () => {
    const gridTocEl = document.querySelector('#nav-primary');
    if (searchFormInputEl.value) {
      gridTocEl.classList.add('is-mobile-hidden');
    } else {
      gridTocEl.classList.remove('is-mobile-hidden');
    }
  });

  document.onkeydown = function (e) {
    if ((e.ctrlKey || e.metaKey) && e.which == 75) {
      e.preventDefault();
      searchFormInputEl.focus();
    }
  };
</script><script type="module" src="/_astro/src/components/docsearch.js"></script><doc-search api-key="562139304880b94536fc53f5d65c5c19" selector="#search-form-input" class="astro-ahFEmudE"></doc-search><div class="wrapper astro-Ju9h9Rf8"><section class="layout astro-Ju9h9Rf8"><aside id="nav-primary" class="layout-nav astro-Ju9h9Rf8"><nav class="nav astro-hk9uDi21"><ol class="contents astro-hk9uDi21"><li class="section astro-hk9uDi21"><span class="header astro-hk9uDi21">概念</span><ol class="items astro-hk9uDi21"><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/concepts/how-snowpack-works">Snowpack运行机制</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/concepts/dev-server">开发时服务</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/concepts/build-pipeline">打包流程</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/concepts/hot-module-replacement">模块热替换(HMR)</a></li></ol></li><li class="section astro-hk9uDi21"><span class="header astro-hk9uDi21">开始</span><ol class="items astro-hk9uDi21"><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/tutorials/quick-start">快速上手</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/tutorials/getting-started">正式使用</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/tutorials/react">React</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/tutorials/svelte">Svelte</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/tutorials/vue">Vue</a></li></ol></li><li class="section astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/guides"><span class="header astro-hk9uDi21">指南</span></a></li><li class="section astro-hk9uDi21"><span class="header astro-hk9uDi21">引用</span><ol class="items astro-hk9uDi21"><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/configuration">snowpack.config.js</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/cli-command-line-interface">命令行 API</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/javascript-interface">JavaScript API</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/plugins">插件 API</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/environment-variables">环境变量</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/hot-module-replacement">模块热替换 API</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/supported-files">支持的文件类型</a></li><li class="astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/reference/common-error-details">常见错误</a></li></ol></li><li class="section astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/plugins"><span class="header astro-hk9uDi21">插件目录</span></a></li><li class="section astro-hk9uDi21"><a class="link astro-hk9uDi21" href="/news"><span class="header astro-hk9uDi21">社区 &amp; 新闻</span></a></li></ol></nav></aside><div class="astro-Ju9h9Rf8"><script type="module" defer="" src="/js/index.js"></script><aside class="subnav astro-6RrcgMjt"><div class="astro-6RrcgMjt"><h4 class="header astro-6RrcgMjt">小节</h4><nav class="toc astro-6RrcgMjt"><ol class="astro-6RrcgMjt"><li class="astro-6RrcgMjt"><a href="#启用流式导入" class="astro-6RrcgMjt">启用流式导入</a></li><li class="astro-6RrcgMjt"><a href="#流式导入如何工作" class="astro-6RrcgMjt">流式导入如何工作</a></li><li class="astro-6RrcgMjt"><a href="#流式导入的好处" class="astro-6RrcgMjt">流式导入的好处</a></li><li class="astro-6RrcgMjt"><a href="#snowpack-管理的依赖关系" class="astro-6RrcgMjt">Snowpack 管理的依赖关系</a></li><li class="astro-6RrcgMjt"><a href="#使用-typescript-的流导入" class="astro-6RrcgMjt">使用 TypeScript 的流导入</a></li><li class="astro-6RrcgMjt"><a href="#在非-js-包中使用流式导入sveltevue-等" class="astro-6RrcgMjt">在非 JS 包中使用流式导入（Svelte、Vue 等）。</a></li><li class="astro-6RrcgMjt"><a href="#如果一个代码包不被支持跑不起来我应该怎么做" class="astro-6RrcgMjt">如果一个代码包不被支持/跑不起来，我应该怎么做？</a></li></ol></nav><hr class="astro-6RrcgMjt"></div><h4 class="header astro-6RrcgMjt">提供建议</h4><a href="https://github.com/snowpackjs/snowpack/blob/main/docs" class="astro-6RrcgMjt">在GitHub上编辑这篇文章</a><div style="height:550px" class="astro-6RrcgMjt"></div><a href="https://beian.miit.gov.cn" style="color:rgb(58,93,127); font-size:15px; line-height: 5; display: inline-flex;" class="astro-6RrcgMjt">
  京ICP备2021037274号-1
</a></aside></div><article class="layout-main astro-Ju9h9Rf8"><div class="content astro-Ju9h9Rf8"><h2 class="content-title astro-Ju9h9Rf8">流式导入</h2><div class="content-layout astro-Ju9h9Rf8"><div class="content-body astro-Ju9h9Rf8"><p>Snowpack v3.0 引入了一个名为 ”<strong>流式导入</strong>“的新功能，在开发和构建期间按需获取导入的软件包。通过用 Snowpack 管理你的前端依赖，你可以把<code>npm</code>留给你的工具专用包，甚至可以完全放弃对<code>npm/yarn/pnpm</code>的依赖。</p><h2 id="启用流式导入">启用流式导入</h2><pre class=" language-js"><code class="language-js"><span class="token comment">// snowpack.config.mjs</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  packageOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    source<span class="token operator">:</span> <span class="token string">"remote"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>将<code>packageOptions.source</code>设置为 “remote “来启用流式导入。这告诉 Snowpack 从 Skypack CDN 获取你的导入，而不是在本地打包它们。阅读我们关于<code>packageOptions</code>的<a href="/reference/configuration#packageoptions.source%3Dremote">完整文档</a>，了解更多关于定制这种行为的信息。</p><h2 id="流式导入如何工作">流式导入如何工作</h2><p>当你启用流式导入并运行<code>snowpack dev</code> 时，本地服务器将开始从<code>https://pkg.snowpack.dev</code> 获取所有的 import。例如，在你的项目中<code>import "preact "</code>会变成在浏览器中<br><code>import "https://pkg.snowpack.dev/preact "</code>的样子。这告诉 Snowpack（或浏览器）通过 URL 导入你的包，并且只在需要时获取包的 ESM。Snowpack 能够对响应进行缓存，以便将来离线使用。</p><p>翻译是由网络服务器完成的，所以你的源文件仍将包含裸露的<code>import "preact "</code>语句。当你运行<code>snowpack build</code>时，build 文件夹中生成的文件将包含<code>import '.../_snowpack/pkg/preact.js';</code> 。</p><p><code>pkg.snowpack.dev</code>是我们的 ESM 包 CDN，由<a href="https://www.skypack.dev/">Skypack</a>支持。每一个 npm 包都被托管为 ESM，任何传统的非 ESM 包都在 CDN 本身上被向上转换为 ESM。</p><blockquote><p><strong>注意:</strong> 在某些罕见的情况下，从包中嵌套导入会导致 Skypack 上的资源引用无效。明确设置<code>packageOptions.origin</code>为<code>"https://cdn.skypack.dev"</code>（而不是使用默认的<code>pkg.snowpack.dev</code>）似乎可以解决这个问题。</p></blockquote><h2 id="流式导入的好处">流式导入的好处</h2><p>与传统的 “npm 安装+本地打包” 方式相比，流式依赖有几个好处。</p><ul><li><strong>速度</strong> 跳过安装+构建依赖关系的步骤，将你的依赖关系作为预构建的 ESM 代码直接从 ESM CDN（如<a href="https://www.skypack.dev/">Skypack</a>）加载。依赖项被缓存在本地，以便离线重用。</li><li><strong>安全性</strong> ESM 包是预先构建的，并且从未被赋予<a href="https://www.usenix.org/system/files/sec19-zimmermann.pdf">在你的机器上运行代码</a>的权限。包只在浏览器沙盒中运行。</li><li><strong>简单性</strong> ESM 包由 Snowpack 管理，因此不需要 Node.js 的前端项目（Rails、PHP 等）可以完全放弃<code>npm</code>CLI，如果他们选择。</li><li><strong>对最终构建没有影响</strong> 流式导入仍会被转译，并与最终构建的其他部分打包在一起，并根据你的精确导入进行 tree-shaking。最后的结果是，最终的构建与其他情况下的构建几乎是一样的。</li></ul><h2 id="snowpack-管理的依赖关系">Snowpack 管理的依赖关系</h2><p>默认情况下，Snowpack 会获取每个软件包的最新版本。如果没有办法按版本管理你的依赖关系，那么随着时间的推移，可能会出现破坏性的变化。</p><p>Snowpack 在你的项目中使用<code>snowpack.deps.json</code>来管理你的依赖版本。如果你熟悉<code>npm install</code>，你的<code>snowpack.deps.j</code>son 文件就像一个合并的<code>package.json</code>和<code>package-lock.json</code>。</p><p>有两个命令可以用来处理这个文件：<code>snowpack add</code>和<code>snowpack rm</code>。</p><p>第一次运行<code>snowpack add [package-name]</code>将在你的项目中创建一个新的<code>snowpack.deps.json</code>文件来存储关于你的新依赖关系的信息，比如所需的 SemVer 版本范围和 lockfile 信息。</p><h2 id="使用-typescript-的流导入">使用 TypeScript 的流导入</h2><pre class=" language-js"><code class="language-js"><span class="token comment">// snowpack.config.mjs /w TypeScript Support</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  packageOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    source<span class="token operator">:</span> <span class="token string">"remote"</span><span class="token punctuation">,</span>
    types<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><p>设置<code>types=true</code>告诉 Snowpack 在你的项目中安装 TypeScript 类型。Snowpack 会将这些类型安装到你的项目中的本地<code>.snowpack/types</code>目录中，然后你可以在你的项目<code>tsconfig.json</code>中指向这个目录，以便为你的 npm 包获得自动类型。</p><pre class=" language-js"><code class="language-js"><span class="token comment">// Example: tsconfig.json /w Snowpack streaming imports</span>
<span class="token string">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"./"</span><span class="token punctuation">,</span>
<span class="token string">"paths"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string">"*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">".snowpack/types/*"</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><p>当你启动你的项目时（使用<code>snowpack dev</code>或<code>snowpack build</code>），Snowpack 将同步这个<code>.snowpack/types</code>目录并下载你可能需要的任何新类型。你也可以随时通过<code>snowpack prepare</code>手动触发一次同步。</p><h2 id="在非-js-包中使用流式导入sveltevue-等">在非 JS 包中使用流式导入（Svelte、Vue 等）。</h2><p>Skypack（支持<code>pkg.snowpack.dev</code> 的 CDN）总是喜欢软件包的 JavaScript 入口而不是任何源<code>.svelte</code>和<code>.vue</code>文件。这对大多数软件包（包括大多数 Svelte 和 Vue 软件包）都有效，但在一些项目中可能会造成麻烦。在未来的版本中，我们将添加更好的支持来本地构建这些类型的包。</p><h2 id="如果一个代码包不被支持跑不起来我应该怎么做">如果一个代码包不被支持/跑不起来，我应该怎么做？</h2><p>Skypack（支持<code>pkg.snowpack.dev</code> 的 CDN）一直在改进，其目标是支持所有代码包。如果你发现某个代码包无法使用，请向 GitHub 上的<a href="https://github.com/snowpackjs/skypack-cdn/issues">Skypack 问题追踪器</a>报告。许多 Snowpack 的核心贡献者也在 Skypack 上工作，他们会很乐意看一下这个出问题的代码包。</p><p>在未来的版本中，我们将添加更好的支持，以便在本地替换损坏的代码包。</p></div></div></div></article></section></div><script async="async" src="https://www.googletagmanager.com/gtag/js?id=UA-130280175-9"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'UA-130280175-9', { page_path: location.pathname === '/' ? (location.pathname + location.hash) : (location.pathname) });
</script></body></html>